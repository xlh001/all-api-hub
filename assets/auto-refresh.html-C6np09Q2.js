import{_ as l,c as a,a as r,b as t,d as n,e as s,w as i,r as u,o as d}from"./app-BVaS0AW8.js";const h={},c={style:{"text-align":"left"}},m={style:{"text-align":"left"}};function f(g,e){const o=u("RouteLink");return d(),a("div",null,[e[20]||(e[20]=r('<h1 id="automatic-refresh-and-real-time-data" tabindex="-1"><a class="header-anchor" href="#automatic-refresh-and-real-time-data"><span>Automatic Refresh and Real-time Data</span></a></h1><blockquote><p>Keep account balances, usage, and model lists up-to-date without manual &#39;refresh&#39; clicks. Provides a dual strategy of background timers and instant refresh upon popup opening.</p></blockquote><h2 id="feature-overview" tabindex="-1"><a class="header-anchor" href="#feature-overview"><span>Feature Overview</span></a></h2><ul><li><strong>Background Timer</strong>: Driven by <code>autoRefreshService</code>, it periodically calls the account refresh API in the browser background, supporting customizable intervals from 10 seconds to several hours.</li><li><strong>Refresh on Open</strong>: An optional &quot;Auto-refresh when opening the plugin&quot; switch, suitable for scenarios where the background timer is off but data synchronization is still desired.</li><li><strong>Minimum Interval Protection</strong>: Independently set <code>minInterval</code> to prevent overly frequent manual refreshes from triggering site risk control.</li><li><strong>Instant Refresh</strong>: Execute &quot;Refresh Now&quot; at any time to immediately get the latest balance/quota for all sites.</li></ul><h2 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites"><span>Prerequisites</span></a></h2>',5)),t("ol",null,[e[3]||(e[3]=t("li",null,"At least one site account has been successfully added.",-1)),e[4]||(e[4]=t("li",null,"The browser must keep the extension running (Kiwi/Firefox on mobile also works, but ensure the browser is not killed by the system).",-1)),t("li",null,[e[1]||(e[1]=n("If the site has Cloudflare protection, please refer to ",-1)),s(o,{to:"/en/cloudflare-helper.html"},{default:i(()=>e[0]||(e[0]=[n("Cloudflare Helper",-1)])),_:1,__:[0]}),e[2]||(e[2]=n(" to complete the verification first.",-1))])]),e[21]||(e[21]=r('<h2 id="settings-entry" tabindex="-1"><a class="header-anchor" href="#settings-entry"><span>Settings Entry</span></a></h2><ol><li>Open Plugin ‚Üí <strong>Settings</strong>.</li><li>Select the <strong>&quot;Basic Settings ‚Üí Auto Refresh&quot;</strong> tab to enter the <code>RefreshSettings</code> panel.</li></ol><h2 id="main-configuration-items" tabindex="-1"><a class="header-anchor" href="#main-configuration-items"><span>Main Configuration Items</span></a></h2><table><thead><tr><th style="text-align:left;">Option</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Enable Auto Refresh</strong></td><td style="text-align:left;">Controls the background timer switch; only manual refresh remains when disabled.</td></tr><tr><td style="text-align:left;"><strong>Refresh Interval (seconds)</strong></td><td style="text-align:left;">Timer cycle, corresponds to <code>accountAutoRefresh.interval</code>. Inputting &lt;10 seconds will trigger a warning.</td></tr><tr><td style="text-align:left;"><strong>Auto Refresh on Plugin Open</strong></td><td style="text-align:left;">Automatically executes <code>refreshNow()</code> once every time the browser icon is clicked to open the popup.</td></tr><tr><td style="text-align:left;"><strong>Minimum Refresh Interval (seconds)</strong></td><td style="text-align:left;">Limits users from frequently clicking the &quot;Refresh&quot; button; default is 60 seconds.</td></tr><tr><td style="text-align:left;"><strong>Restore Defaults</strong></td><td style="text-align:left;">Calls <code>resetAutoRefreshConfig()</code>, restoring to 360s/60s/enabled state.</td></tr></tbody></table><h2 id="how-it-works" tabindex="-1"><a class="header-anchor" href="#how-it-works"><span>How It Works</span></a></h2><ol><li>After the user saves settings, <code>accountAutoRefresh</code> is written to local preferences via <code>UserPreferencesContext</code>.</li><li>The background page receives the <code>updateAutoRefreshSettings</code> message and calls <code>autoRefreshService.setupAutoRefresh()</code>: <ul><li>If the switch is off or the configuration is incomplete, the timer is stopped.</li><li>Otherwise, <code>setInterval</code> is created based on the interval, periodically executing <code>accountStorage.refreshAllAccounts(false)</code>.</li></ul></li><li>Refresh results (success/failure) are broadcast to the frontend via the <code>AUTO_REFRESH_UPDATE</code> message; if the popup is not open, it is silently ignored.</li></ol><h2 id="recommended-strategies" tabindex="-1"><a class="header-anchor" href="#recommended-strategies"><span>Recommended Strategies</span></a></h2><ul><li><strong>High-Frequency Check</strong>: For core accounts, it is recommended to set 300-600 seconds to ensure timely balance alerts.</li><li><strong>Low-Frequency + Refresh on Open</strong>: If concerned about site rate limiting, the background timer can be turned off, keeping only &quot;Refresh on Open&quot;.</li><li><strong>Combine with Notifications</strong>: Combine with browser&#39;s own notifications or scripts, listen for <code>AUTO_REFRESH_UPDATE</code> for secondary development of reminders.</li></ul><h2 id="common-issues" tabindex="-1"><a class="header-anchor" href="#common-issues"><span>Common Issues</span></a></h2>',9)),t("table",null,[e[15]||(e[15]=t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"left"}},"Issue"),t("th",{style:{"text-align":"left"}},"Solution")])],-1)),t("tbody",null,[e[13]||(e[13]=t("tr",null,[t("td",{style:{"text-align":"left"}},"Scheduled refresh not triggered"),t("td",{style:{"text-align":"left"}},'The browser might be put to sleep by the system. Reopen the extension or manually click "Refresh Now"; try reducing the interval if necessary.')],-1)),t("tr",null,[e[8]||(e[8]=t("td",{style:{"text-align":"left"}},"Frequent Cloudflare rate limiting",-1)),t("td",c,[e[6]||(e[6]=n("Appropriately increase the refresh interval and ensure that ",-1)),s(o,{to:"/en/cloudflare-helper.html"},{default:i(()=>e[5]||(e[5]=[n("Cloudflare Helper",-1)])),_:1,__:[5]}),e[7]||(e[7]=n(" can properly pop up for verification.",-1))])]),e[14]||(e[14]=t("tr",null,[t("td",{style:{"text-align":"left"}},"Refresh failed with 401/403 error"),t("td",{style:{"text-align":"left"}},"Login status has expired. Revisit the corresponding site in the browser and refresh the plugin.")],-1)),t("tr",null,[e[12]||(e[12]=t("td",{style:{"text-align":"left"}},"Multi-device conflict",-1)),t("td",m,[e[10]||(e[10]=n("It is recommended to use ",-1)),s(o,{to:"/en/webdav-sync.html"},{default:i(()=>e[9]||(e[9]=[n("WebDAV Backup and Auto Sync",-1)])),_:1,__:[9]}),e[11]||(e[11]=n(" to unify account data and avoid repeatedly refreshing the same site.",-1))])])])]),e[22]||(e[22]=t("h2",{id:"related-documentation",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#related-documentation"},[t("span",null,"Related Documentation")])],-1)),t("ul",null,[t("li",null,[s(o,{to:"/en/cloudflare-helper.html"},{default:i(()=>e[16]||(e[16]=[n("Cloudflare Helper",-1)])),_:1,__:[16]})]),t("li",null,[s(o,{to:"/en/auto-checkin.html"},{default:i(()=>e[17]||(e[17]=[n("Auto Check-in",-1)])),_:1,__:[17]})]),t("li",null,[s(o,{to:"/en/webdav-sync.html"},{default:i(()=>e[18]||(e[18]=[n("WebDAV Backup and Auto Sync",-1)])),_:1,__:[18]})]),t("li",null,[s(o,{to:"/en/permissions.html"},{default:i(()=>e[19]||(e[19]=[n("Permission Management (Optional Permissions)",-1)])),_:1,__:[19]})])])])}const b=l(h,[["render",f]]),y=JSON.parse('{"path":"/en/auto-refresh.html","title":"Automatic Refresh and Real-time Data","lang":"en-US","frontmatter":{},"git":{"updatedTime":1764961437000,"contributors":[{"name":"github-actions[bot]","username":"github-actions[bot]","email":"41898282+github-actions[bot]@users.noreply.github.com","commits":2,"url":"https://github.com/github-actions[bot]"},{"name":"qixing-jk","username":"qixing-jk","email":"125447674+qixing-jk@users.noreply.github.com","commits":2,"url":"https://github.com/qixing-jk"},{"name":"anime","username":"anime","email":"street-anime-olive@duck.com","commits":2,"url":"https://github.com/anime"}],"changelog":[{"hash":"4c8982c28b76d99182a86ef08f14493c32cf154c","time":1764961437000,"email":"41898282+github-actions[bot]@users.noreply.github.com","author":"github-actions[bot]","message":"üåê Auto-translate documentation (#240)","coAuthors":[{"name":"qixing-jk","email":"125447674+qixing-jk@users.noreply.github.com"},{"name":"anime","email":"street-anime-olive@duck.com"}]},{"hash":"41f1dac37b86843d5260f53043bf3d77fc49076a","time":1763878702000,"email":"41898282+github-actions[bot]@users.noreply.github.com","author":"github-actions[bot]","message":"üåê Auto-translate documentation (#182)","coAuthors":[{"name":"qixing-jk","email":"125447674+qixing-jk@users.noreply.github.com"},{"name":"anime","email":"street-anime-olive@duck.com"}]}]},"filePathRelative":"en/auto-refresh.md"}');export{b as comp,y as data};
