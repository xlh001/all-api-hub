import{_ as a,c as l,a as i,b as t,d as o,e as s,w as r,r as u,o as d}from"./app-CtgLb2Fx.js";const h={};function c(m,e){const n=u("RouteLink");return d(),l("div",null,[e[20]||(e[20]=i('<h1 id="automatic-refresh-and-real-time-data" tabindex="-1"><a class="header-anchor" href="#automatic-refresh-and-real-time-data"><span>Automatic Refresh and Real-time Data</span></a></h1><blockquote><p>Keep account balances, usage, and model lists up-to-date without manually clicking &quot;Refresh&quot; every time. It offers a dual strategy of a background timer and instant refresh upon opening the pop-up.</p></blockquote><h2 id="feature-overview" tabindex="-1"><a class="header-anchor" href="#feature-overview"><span>Feature Overview</span></a></h2><ul><li><strong>Background Timer</strong>: Driven by <code>autoRefreshService</code>, it periodically calls the account refresh interface in the browser background, supporting custom intervals from 10 seconds to several hours.</li><li><strong>Refresh on Open</strong>: An optional &quot;Auto-refresh when opening the plugin&quot; switch, suitable for scenarios where the background timer is off but data synchronization is still desired.</li><li><strong>Minimum Interval Protection</strong>: Independently set <code>minInterval</code> to prevent overly frequent manual refreshes from triggering site risk control.</li><li><strong>Instant Refresh</strong>: Execute &quot;Refresh Now&quot; at any time to immediately get the latest balance/quota for all sites.</li></ul><h2 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites"><span>Prerequisites</span></a></h2>',5)),t("ol",null,[e[3]||(e[3]=t("li",null,"At least one site account has been successfully added.",-1)),e[4]||(e[4]=t("li",null,"The browser must keep the extension running (mobile Kiwi/Firefox is also acceptable, but ensure the browser is not killed by the system).",-1)),t("li",null,[e[1]||(e[1]=o("If the site has Cloudflare protection, please refer to ",-1)),s(n,{to:"/en/cloudflare-helper.html"},{default:r(()=>e[0]||(e[0]=[o("Cloudflare Bypass Helper",-1)])),_:1,__:[0]}),e[2]||(e[2]=o(" to complete the verification first.",-1))])]),e[21]||(e[21]=i('<h2 id="settings-entry" tabindex="-1"><a class="header-anchor" href="#settings-entry"><span>Settings Entry</span></a></h2><ol><li>Open the plugin ‚Üí <strong>Settings</strong>.</li><li>Select the <strong>&quot;Basic Settings ‚Üí Auto Refresh&quot;</strong> tab to enter the <code>RefreshSettings</code> panel.</li></ol><h2 id="key-configuration-items" tabindex="-1"><a class="header-anchor" href="#key-configuration-items"><span>Key Configuration Items</span></a></h2><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><strong>Enable Auto Refresh</strong></td><td>Controls the background timer switch; when off, only manual refresh is retained.</td></tr><tr><td><strong>Refresh Interval (seconds)</strong></td><td>The timer&#39;s operating cycle, corresponding to <code>accountAutoRefresh.interval</code>. Inputting &lt;10 seconds will trigger a warning.</td></tr><tr><td><strong>Auto Refresh when Opening Plugin</strong></td><td>Automatically executes <code>refreshNow()</code> once every time the browser icon is clicked to open the pop-up.</td></tr><tr><td><strong>Minimum Refresh Interval (seconds)</strong></td><td>Limits users from frequently clicking the &quot;Refresh&quot; button; default is 60 seconds.</td></tr><tr><td><strong>Restore Defaults</strong></td><td>Calls <code>resetAutoRefreshConfig()</code>, restoring to 360s/60s/enabled state.</td></tr></tbody></table><h2 id="how-it-works" tabindex="-1"><a class="header-anchor" href="#how-it-works"><span>How It Works</span></a></h2><ol><li>After the user saves the settings, <code>accountAutoRefresh</code> is written to local preferences via <code>UserPreferencesContext</code>.</li><li>The background page receives the <code>RuntimeActionIds.AutoRefreshUpdateSettings</code> (wire: <code>autoRefresh:updateSettings</code>) message and calls <code>autoRefreshService.setupAutoRefresh()</code>: <ul><li>If the switch is off or the configuration is incomplete, the timer is stopped.</li><li>Otherwise, <code>setInterval</code> is created based on the interval, periodically executing <code>accountStorage.refreshAllAccounts(false)</code>.</li></ul></li><li>Refresh results (success/failure) are broadcast to the frontend via the <code>AUTO_REFRESH_UPDATE</code> message; if the pop-up is not open, it is silently ignored.</li></ol><h2 id="recommended-strategies" tabindex="-1"><a class="header-anchor" href="#recommended-strategies"><span>Recommended Strategies</span></a></h2><ul><li><strong>High-Frequency Check</strong>: For core accounts, it is recommended to set 300-600 seconds to ensure timely balance alerts.</li><li><strong>Low-Frequency + Refresh on Open</strong>: If concerned about site rate limiting, the background timer can be turned off, retaining only &quot;Refresh on Open&quot;.</li><li><strong>Combine with Notifications</strong>: Integrate with browser&#39;s own notifications or scripts, listening for <code>AUTO_REFRESH_UPDATE</code> for secondary development of reminders.</li></ul><h2 id="common-issues" tabindex="-1"><a class="header-anchor" href="#common-issues"><span>Common Issues</span></a></h2>',9)),t("table",null,[e[15]||(e[15]=t("thead",null,[t("tr",null,[t("th",null,"Issue"),t("th",null,"Solution")])],-1)),t("tbody",null,[e[13]||(e[13]=t("tr",null,[t("td",null,"Scheduled refresh not triggered"),t("td",null,'The browser might be hibernated by the system. Reopen the extension or manually click "Refresh Now"; if necessary, try reducing the interval.')],-1)),t("tr",null,[e[8]||(e[8]=t("td",null,"Frequent Cloudflare rate limiting",-1)),t("td",null,[e[6]||(e[6]=o("Appropriately increase the refresh interval and ensure that ",-1)),s(n,{to:"/en/cloudflare-helper.html"},{default:r(()=>e[5]||(e[5]=[o("Cloudflare Bypass Helper",-1)])),_:1,__:[5]}),e[7]||(e[7]=o(" can perform pop-up verification normally.",-1))])]),e[14]||(e[14]=t("tr",null,[t("td",null,"Refresh failed with 401/403 error"),t("td",null,"The login status has expired. Revisit the corresponding site in the browser and refresh the plugin.")],-1)),t("tr",null,[e[12]||(e[12]=t("td",null,"Multi-device conflicts",-1)),t("td",null,[e[10]||(e[10]=o("It is recommended to use ",-1)),s(n,{to:"/en/webdav-sync.html"},{default:r(()=>e[9]||(e[9]=[o("WebDAV Backup and Auto Sync",-1)])),_:1,__:[9]}),e[11]||(e[11]=o(" to unify account data and avoid repeatedly refreshing the same site.",-1))])])])]),e[22]||(e[22]=t("h2",{id:"related-documentation",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#related-documentation"},[t("span",null,"Related Documentation")])],-1)),t("ul",null,[t("li",null,[s(n,{to:"/en/cloudflare-helper.html"},{default:r(()=>e[16]||(e[16]=[o("Cloudflare Bypass Helper",-1)])),_:1,__:[16]})]),t("li",null,[s(n,{to:"/en/auto-checkin.html"},{default:r(()=>e[17]||(e[17]=[o("Auto Check-in",-1)])),_:1,__:[17]})]),t("li",null,[s(n,{to:"/en/webdav-sync.html"},{default:r(()=>e[18]||(e[18]=[o("WebDAV Backup and Auto Sync",-1)])),_:1,__:[18]})]),t("li",null,[s(n,{to:"/en/permissions.html"},{default:r(()=>e[19]||(e[19]=[o("Permission Management (Optional Permissions)",-1)])),_:1,__:[19]})])])])}const g=a(h,[["render",c]]),p=JSON.parse('{"path":"/en/auto-refresh.html","title":"Automatic Refresh and Real-time Data","lang":"en-US","frontmatter":{},"git":{"updatedTime":1769447667000,"contributors":[{"name":"github-actions[bot]","username":"github-actions[bot]","email":"41898282+github-actions[bot]@users.noreply.github.com","commits":3,"url":"https://github.com/github-actions[bot]"},{"name":"qixing-jk","username":"qixing-jk","email":"125447674+qixing-jk@users.noreply.github.com","commits":3,"url":"https://github.com/qixing-jk"},{"name":"anime","username":"anime","email":"street-anime-olive@duck.com","commits":2,"url":"https://github.com/anime"}],"changelog":[{"hash":"29f444544e5af4b649893b3c4380ede93a2045fe","time":1769447667000,"email":"41898282+github-actions[bot]@users.noreply.github.com","author":"github-actions[bot]","message":"üåê Auto-translate documentation (#399)","coAuthors":[{"name":"qixing-jk","email":"125447674+qixing-jk@users.noreply.github.com"}]},{"hash":"4c8982c28b76d99182a86ef08f14493c32cf154c","time":1764961437000,"email":"41898282+github-actions[bot]@users.noreply.github.com","author":"github-actions[bot]","message":"üåê Auto-translate documentation (#240)","coAuthors":[{"name":"qixing-jk","email":"125447674+qixing-jk@users.noreply.github.com"},{"name":"anime","email":"street-anime-olive@duck.com"}]},{"hash":"41f1dac37b86843d5260f53043bf3d77fc49076a","time":1763878702000,"email":"41898282+github-actions[bot]@users.noreply.github.com","author":"github-actions[bot]","message":"üåê Auto-translate documentation (#182)","coAuthors":[{"name":"qixing-jk","email":"125447674+qixing-jk@users.noreply.github.com"},{"name":"anime","email":"street-anime-olive@duck.com"}]}]},"filePathRelative":"en/auto-refresh.md"}');export{g as comp,p as data};
