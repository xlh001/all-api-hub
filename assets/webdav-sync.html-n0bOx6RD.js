import{_ as r,c as s,a as c,b as t,e as a,w as n,r as l,o as d,d as i}from"./app-hOV8JZRK.js";const u={};function h(m,e){const o=l("RouteLink");return d(),s("div",null,[e[3]||(e[3]=c('<h1 id="webdav-backup-and-automatic-synchronization" tabindex="-1"><a class="header-anchor" href="#webdav-backup-and-automatic-synchronization"><span>WebDAV Backup and Automatic Synchronization</span></a></h1><blockquote><p>Periodically back up accounts and preferences via a WebDAV server to enable multi-device sharing, version rollback, and disaster recovery.</p></blockquote><h2 id="feature-highlights" tabindex="-1"><a class="header-anchor" href="#feature-highlights"><span>Feature Highlights</span></a></h2><ul><li><strong>One-Click Backup/Restore</strong>: After filling in WebDAV credentials on the &quot;Import/Export&quot; page, you can upload or download JSON backups at any time.</li><li><strong>Automatic Synchronization</strong>: <code>webdavAutoSyncService</code> supports scheduled background synchronization (default 1 hour), automatically merging or overwriting data based on the strategy.</li><li><strong>Multi-Strategy Support</strong>: Choose &quot;Merge / Upload Only / Download Only&quot; to meet differentiated needs for primary and secondary devices.</li><li><strong>Conflict Merging</strong>: In merge mode, accounts and preferences are de-duplicated by update time, maximizing the retention of newer data.</li></ul><h2 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites"><span>Prerequisites</span></a></h2><ol><li>Prepare an accessible WebDAV server: e.g., Nextcloud, Nutstore, Alist WebDAV, NAS, etc.</li><li>Obtain <code>URL / Username / Password</code>, ensuring read/write permissions.</li><li>If automatic synchronization is required, it is recommended to keep the browser running in the background (desktop Chrome/Edge or mobile Kiwi).</li></ol><h2 id="configuration-entry" tabindex="-1"><a class="header-anchor" href="#configuration-entry"><span>Configuration Entry</span></a></h2><ol><li>Open Extension ‚Üí <strong>Import/Export</strong> ‚Üí &quot;WebDAV Settings&quot;.</li><li>Fill in: <ul><li><strong>Server Address</strong>: Can point to a directory or a specific JSON file; if a directory is entered, <code>all-api-hub-backup/all-api-hub-1-0.json</code> will be automatically created under it.</li><li><strong>Username/Password</strong>: Used for Basic Auth.</li></ul></li><li>Click <strong>&quot;Test Connection&quot;</strong> to verify the configuration, then you can perform &quot;Upload Backup&quot; or &quot;Download Backup&quot;.</li></ol><h2 id="automatic-synchronization" tabindex="-1"><a class="header-anchor" href="#automatic-synchronization"><span>Automatic Synchronization</span></a></h2><p>Enable &quot;Automatic Synchronization&quot; on the same page for scheduled background synchronization:</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><strong>Enable Automatic Sync</strong></td><td>Corresponds to the <code>webdav.autoSync</code> switch; when off, only manual backups are retained.</td></tr><tr><td><strong>Sync Interval</strong></td><td>In seconds, default 3600 seconds (1 hour).</td></tr><tr><td><strong>Sync Strategy</strong></td><td><code>merge</code> (merge), <code>upload_only</code> (local overwrites remote), <code>download_only</code> (remote overwrites local).</td></tr><tr><td><strong>Sync Now</strong></td><td>Triggers <code>webdavAutoSync:syncNow</code> for debugging; if synchronization is in progress, it will prompt to try again later.</td></tr></tbody></table><h3 id="scheduling-process" tabindex="-1"><a class="header-anchor" href="#scheduling-process"><span>Scheduling Process</span></a></h3><ol><li>After the user saves settings, <code>webdavAutoSyncService.setupAutoSync()</code> will recreate the <code>setInterval</code> timer.</li><li>When synchronization is performed: <ul><li>First call <code>testWebdavConnection</code> to confirm credentials are valid.</li><li>Download remote backup (if it doesn&#39;t exist, it&#39;s considered the first backup).</li><li>Export local accounts and preferences, determining the final data based on the strategy: <ul><li><strong>Merge</strong>: Retain the latest items based on <code>updated_at</code> / <code>lastUpdated</code> timestamps.</li><li><strong>Upload Only/Download Only</strong>: Directly select local or remote data.</li></ul></li><li>Write the merged result back to local (via <code>accountStorage.importData</code> + <code>userPreferences.importPreferences</code>).</li><li>Generate new JSON and upload it to <code>all-api-hub-backup/all-api-hub-1-0.json</code>.</li></ul></li><li>Synchronization status (success/failure, last execution time) will be broadcast via the <code>WEBDAV_AUTO_SYNC_UPDATE</code> message, which can be monitored on the frontend or viewed in console logs.</li></ol><h2 id="security-recommendations" tabindex="-1"><a class="header-anchor" href="#security-recommendations"><span>Security Recommendations</span></a></h2><ul><li>It is recommended to create a separate sub-account or access token for the backup directory on the WebDAV server.</li><li>Do not save WebDAV passwords on public devices, and change them regularly if necessary.</li><li>If synchronization fails with a 401/403 error, please confirm that the server supports Basic Auth and allows <code>MKCOL/PUT/GET</code> methods.</li></ul><h2 id="common-issues" tabindex="-1"><a class="header-anchor" href="#common-issues"><span>Common Issues</span></a></h2><table><thead><tr><th>Issue</th><th>Solution</th></tr></thead><tbody><tr><td>Test connection failed</td><td>Check if the URL includes the protocol (<code>https://</code>) and if remote writing is allowed.</td></tr><tr><td>Automatic synchronization unresponsive</td><td>Possibly due to the browser being put to sleep by the system or automatic synchronization not being enabled; reopen the extension and save settings.</td></tr><tr><td>Duplicate accounts after merging</td><td>Manually delete duplicates and re-upload; for strict control, use the &quot;Upload Only&quot; strategy.</td></tr><tr><td>JSON file too large</td><td>It is recommended to regularly clean up expired accounts or export in batches to avoid exceeding WebDAV limits.</td></tr></tbody></table><h2 id="related-documents" tabindex="-1"><a class="header-anchor" href="#related-documents"><span>Related Documents</span></a></h2>',18)),t("ul",null,[t("li",null,[a(o,{to:"/en/auto-refresh.html"},{default:n(()=>e[0]||(e[0]=[i("Auto-Refresh and Real-time Data",-1)])),_:1,__:[0]})]),t("li",null,[a(o,{to:"/en/auto-checkin.html"},{default:n(()=>e[1]||(e[1]=[i("Auto-Check-in",-1)])),_:1,__:[1]})]),t("li",null,[a(o,{to:"/en/cloudflare-helper.html"},{default:n(()=>e[2]||(e[2]=[i("Cloudflare Bypass Helper",-1)])),_:1,__:[2]})])])])}const g=r(u,[["render",h]]),b=JSON.parse('{"path":"/en/webdav-sync.html","title":"WebDAV Backup and Automatic Synchronization","lang":"en-US","frontmatter":{},"git":{"updatedTime":1763878702000,"contributors":[{"name":"github-actions[bot]","username":"github-actions[bot]","email":"41898282+github-actions[bot]@users.noreply.github.com","commits":1,"url":"https://github.com/github-actions[bot]"},{"name":"qixing-jk","username":"qixing-jk","email":"125447674+qixing-jk@users.noreply.github.com","commits":1,"url":"https://github.com/qixing-jk"},{"name":"anime","username":"anime","email":"street-anime-olive@duck.com","commits":1,"url":"https://github.com/anime"}],"changelog":[{"hash":"41f1dac37b86843d5260f53043bf3d77fc49076a","time":1763878702000,"email":"41898282+github-actions[bot]@users.noreply.github.com","author":"github-actions[bot]","message":"üåê Auto-translate documentation (#182)","coAuthors":[{"name":"qixing-jk","email":"125447674+qixing-jk@users.noreply.github.com"},{"name":"anime","email":"street-anime-olive@duck.com"}]}]},"filePathRelative":"en/webdav-sync.md"}');export{g as comp,b as data};
