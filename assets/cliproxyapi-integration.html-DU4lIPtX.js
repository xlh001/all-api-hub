import{_ as n,c as r,a as s,b as e,e as o,w as a,r as c,o as d,d as t}from"./app-CYIPQ_b3.js";const u={};function m(p,i){const l=c("RouteLink");return d(),r("div",null,[i[3]||(i[3]=s('<h1 id="cliproxyapi-集成与一键导入" tabindex="-1"><a class="header-anchor" href="#cliproxyapi-集成与一键导入"><span>CLIProxyAPI 集成与一键导入</span></a></h1><blockquote><p>将中转站账号一键导入到本地 CLIProxyAPI 管理接口，自动生成 OpenAI 兼容提供方配置，避免手动维护配置文件。</p></blockquote><h2 id="功能概览" tabindex="-1"><a class="header-anchor" href="#功能概览"><span>功能概览</span></a></h2><ul><li><strong>管理接口对接</strong><ul><li>通过 CLIProxyAPI 的 Management API（<code>/openai-compatibility</code>）读取并写回配置。</li><li>支持在已有提供方上追加/更新 API Key，或自动创建新提供方。</li></ul></li><li><strong>一键导入密钥</strong><ul><li>在密钥列表中点击“导入到 CLIProxyAPI”，即可将当前站点的 Base URL 与密钥写入 CLIProxyAPI。</li></ul></li><li><strong>避免重复配置</strong><ul><li>自动复用站点名称和 <code>Base URL</code>，若检测到相同提供方则只更新密钥列表，不会创建重复条目。</li></ul></li></ul><h2 id="前置条件" tabindex="-1"><a class="header-anchor" href="#前置条件"><span>前置条件</span></a></h2><ul><li>已部署或运行兼容的 <strong>CLIProxyAPI</strong>，并开启管理接口： <ul><li>示例地址：<code>http://localhost:8317/v0/management</code></li><li>支持 <code>GET/PUT/PATCH /openai-compatibility</code> 等接口。</li></ul></li><li>拥有管理接口的 <strong>Management Key</strong>（用于鉴权）。</li><li>在 All API Hub 中已完成： <ul><li>至少添加一个中转站账号并获取可用密钥。</li></ul></li></ul><h2 id="设置入口" tabindex="-1"><a class="header-anchor" href="#设置入口"><span>设置入口</span></a></h2><ol><li>打开插件 → 进入 <strong>设置</strong> 页面。</li><li>切换到 <strong>“CLIProxyAPI”</strong> 分组（<code>基础设置 → CLIProxyAPI</code> 标签页）。</li><li>填写以下字段： <ul><li><strong>管理接口基础 URL</strong>：例如 <code>http://localhost:8317/v0/management</code></li><li><strong>管理密钥（Management Key）</strong>：用于访问管理接口的密钥。</li></ul></li><li>保存后，配置会存储到本地偏好中，供后续导入操作复用。</li></ol><h2 id="从密钥列表一键导入" tabindex="-1"><a class="header-anchor" href="#从密钥列表一键导入"><span>从密钥列表一键导入</span></a></h2><ol><li>打开插件 → 进入 <strong>密钥管理</strong> 页面。</li><li>找到想要导入到 CLIProxyAPI 的站点密钥卡片。</li><li>点击密钥右侧的 CLIProxyAPI 图标按钮（通常在 CherryStudio / CC Switch / New API 按钮旁边）。</li><li>插件会： <ul><li>读取 CLIProxyAPI 配置（基础 URL 和管理密钥）。</li><li>使用站点的 <code>Base URL</code> 生成 OpenAI 兼容地址（自动拼接 <code>/v1</code>）。</li><li>以站点名称或 Base URL 作为提供方名称。</li><li>（可选）在导入弹窗中配置 <strong>模型映射</strong>（原始模型 → 别名）；弹窗会尝试从上游 <code>/v1/models</code> 拉取模型列表，便于选择原始模型。</li><li>调用 CLIProxyAPI： <ul><li>若已存在同名或相同 <code>base-url</code> 的提供方： <ul><li>去重后在 <code>api-key-entries</code> 中追加当前密钥。</li></ul></li><li>若不存在： <ul><li>创建一个新的提供方条目，仅包含当前密钥和基础信息。</li></ul></li></ul></li></ul></li><li>操作完成后，你会在右上角看到导入结果提示（成功/失败和错误原因）。</li></ol><h2 id="导入到-cliproxyapi-后的效果" tabindex="-1"><a class="header-anchor" href="#导入到-cliproxyapi-后的效果"><span>导入到 CLIProxyAPI 后的效果</span></a></h2><ul><li>在 CLIProxyAPI 的配置中，会新增或更新类似结构： <ul><li><code>name</code>：来源于站点名称（或 Base URL）。</li><li><code>base-url</code>：统一指向对应中转站的 <code>/v1</code> OpenAI 兼容接口。</li><li><code>api-key-entries</code>：包含一条或多条 <code>api-key</code> 记录，可在 CLIProxyAPI 中继续手动编辑。</li></ul></li><li>这意味着： <ul><li>在 CLIProxyAPI 层即可统一管理多个上游中转站的密钥。</li><li>All API Hub 负责将基础配置信息同步过去，后续细节可在 CLIProxyAPI 内自定义。</li></ul></li></ul><h2 id="常见问题" tabindex="-1"><a class="header-anchor" href="#常见问题"><span>常见问题</span></a></h2><ul><li><strong>提示未配置 CLIProxyAPI</strong><ul><li>检查是否在 <strong>设置 → CLIProxyAPI</strong> 中填写了基础 URL 和管理密钥。</li><li>确保未多余带 <code>/openai-compatibility</code>，应为管理接口前缀，例如 <code>.../v0/management</code>。</li></ul></li><li><strong>返回 401/403 或其它 HTTP 错误</strong><ul><li>确认管理密钥正确，且当前账号有访问管理接口的权限。</li><li>查看 CLIProxyAPI 后端日志，确认路由与方法（GET/PUT/PATCH）是否启用。</li></ul></li><li><strong>重复导入会生成很多条记录吗？</strong><ul><li>不会。插件会基于 <code>base-url</code> 或名称查找已有提供方： <ul><li>若存在，则只更新 <code>api-key-entries</code>，对同一密钥做去重。</li><li>若不存在，才创建新的提供方。</li></ul></li></ul></li></ul><h2 id="使用建议" tabindex="-1"><a class="header-anchor" href="#使用建议"><span>使用建议</span></a></h2><ul><li>建议先在少量测试账号上验证导入效果，再用于生产环境。</li><li>可配合 All API Hub 的 <strong>快速导出</strong> 功能，将同一批上游站点同步到 New API / CLIProxyAPI 等多种下游系统。</li></ul><h2 id="相关文档" tabindex="-1"><a class="header-anchor" href="#相关文档"><span>相关文档</span></a></h2>',17)),e("ul",null,[e("li",null,[o(l,{to:"/quick-export.html"},{default:a(()=>i[0]||(i[0]=[t("快速导出站点配置",-1)])),_:1,__:[0]})]),e("li",null,[o(l,{to:"/new-api-channel-management.html"},{default:a(()=>i[1]||(i[1]=[t("New API 渠道管理",-1)])),_:1,__:[1]})]),e("li",null,[o(l,{to:"/new-api-model-sync.html"},{default:a(()=>i[2]||(i[2]=[t("New API 模型列表同步",-1)])),_:1,__:[2]})])])])}const g=n(u,[["render",m]]),P=JSON.parse('{"path":"/cliproxyapi-integration.html","title":"CLIProxyAPI 集成与一键导入","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768312245000,"contributors":[{"name":"anime","username":"anime","email":"street-anime-olive@duck.com","commits":1,"url":"https://github.com/anime"},{"name":"qixing-jk","username":"qixing-jk","email":"vq3d5d8c@duck.com","commits":1,"url":"https://github.com/qixing-jk"},{"name":"coderabbitai[bot]","username":"coderabbitai[bot]","email":"136622811+coderabbitai[bot]@users.noreply.github.com","commits":1,"url":"https://github.com/coderabbitai[bot]"}],"changelog":[{"hash":"0f6799aca387ac4be891277566694707b5f9028b","time":1768312245000,"email":"vq3d5d8c@duck.com","author":"qixing-jk","message":"feat(cli-proxy): enhance model mapping with upstream model selection (#352)","coAuthors":[{"name":"coderabbitai[bot]","email":"136622811+coderabbitai[bot]@users.noreply.github.com"}]},{"hash":"c2778fd9b9e8dd5c0f9312313acbecd95a5571d9","time":1764957909000,"email":"street-anime-olive@duck.com","author":"anime","message":"docs: add new sections for CLIProxyAPI integration, model redirect, sorting priority, and permissions management"}]},"filePathRelative":"cliproxyapi-integration.md"}');export{g as comp,P as data};
