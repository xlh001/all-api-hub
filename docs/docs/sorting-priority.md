# 排序优先级设置

> 自定义账号列表中各类排序规则的优先级，让最重要、最需要关注的账号始终排在前面。

## 功能概览

- **多种排序规则组合**
  - 支持按禁用状态、置顶状态、当前站点、健康状态、签到需求、自定义链接、用户字段等多维度排序。
- **拖拽调整优先级**
  - 在设置页中通过拖拽即可改变各排序规则的先后顺序。
- **按需启用/禁用**
  - 每一项排序规则都可以单独开关，适配不同使用习惯。

## 设置入口

1. 打开插件 → 进入 **设置** 页面。
2. 切换到 **“账号管理”** 标签页。
3. 在页面下方找到 **“排序优先级设置”** 区域。

> 提示：你也可以在使用文档中看到“设置 → 排序优先级设置”的入口说明，本页是该功能的详细说明。

## 可用排序规则说明

下表对应代码中的 `SortingCriteriaType`，在 UI 中会显示为更友好的中文文案：

- **禁用账号沉底（disabledAccount）**
  - 说明：被禁用的账号始终排在列表最底部，避免干扰日常使用。

- **置顶优先（pinnedPriority）**
  - 说明：所有被置顶的账号会优先排在列表最前面，且按置顶顺序排列。
  - 适合将常用或重要站点放在顶部。

- **当前站点优先（currentSitePriority）**
  - 说明：当你在某个中转站页面上打开插件时，该站点对应的账号会排在前面。
  - 方便边浏览站点边查看对应账号信息。

- **健康状态（healthStatus）**
  - 说明：按“错误 > 警告 > 未知 > 正常”的顺序排序，让异常账号更靠前。
  - 推荐始终启用，方便快速发现异常渠道。

- **签到需求（checkInRequirement）**
  - 说明：需要签到的账号排在前面，已签到或不需要签到的排在后面。
  - 搭配自动签到功能，可优先处理待签到账号。

- **手动排序（manualOrder）**
  - 说明：尊重你在账号列表中手动调整的顺序。
  - 当启用时，拖动列表中账号顺序会被记住并用于排序。

- **用户自定义字段排序（userCustomSort）**
  - 说明：根据你在账号列表中选定的字段（如余额、消费、收入）进行排序。
  - 例如可将余额最低的账号排在前面以便及时充值。

- **自定义签到链接优先（customCheckInUrl）**
  - 说明：使用了自定义签到 URL 的账号被优先展示。
  - 适用于大量站点中部分使用特殊签到地址的场景。

- **自定义兑换链接优先（customRedeemUrl）**
  - 说明：使用了自定义兑换 URL 的账号被优先展示。
  - 方便你快速找到带有特殊充值/兑换入口的站点。

- **匹配打开标签页（matchedOpenTabs）**
  - 说明：若浏览器当前打开的标签页中包含某个站点的页面，该站点对应账号会排在前面。
  - 适合“边浏览边排查/调整配置”的工作流。

## 如何调整优先级

1. 在 **“排序优先级设置”** 面板中，看到一列排序规则卡片。
2. 鼠标悬停在规则上，按住拖拽手柄将其上下拖动：
   - 越靠上代表优先级越高。
3. 调整后会立即保存到本地偏好中，并应用到账号列表排序逻辑。

## 启用或禁用某个规则

1. 在某条规则卡片上找到开关按钮（通常位于卡片右侧）。
2. 关闭开关表示该规则在排序时被忽略；开启则纳入排序计算。
3. 关闭/开启后，同样会立即保存并更新账号列表显示顺序。

## 排序示例

- **示例一：关注异常 + 当前站点**
  - 规则顺序：健康状态 → 当前站点 → 置顶优先。
  - 效果：
    - 异常账号总是排在前面；
    - 在异常账号中，会优先显示当前站点；
    - 其余按置顶与否和其他规则继续排序。

- **示例二：签到优先**
  - 规则顺序：签到需求 → 置顶优先 → 健康状态。
  - 效果：
    - 需要签到的账号无论健康状态如何都排在最前，方便一口气完成每日签到。

- **示例三：余额驱动**
  - 规则顺序：用户自定义字段排序（余额） → 健康状态。
  - 效果：
    - 余额最低的账号靠前，及时发现快用完的额度；
    - 同时结合健康状态确保异常账号仍突出显示。

## 常见问题

- **排序结果和预期不一致？**
  - 确认是否有某个高优先级规则被忽略（开关关闭）或排序顺序不合预期。
  - 若仍有疑问，可在 GitHub Issues 中附带截图反馈具体排序结果和期望逻辑。

## 相关文档

- [自动签到与签到监控](./auto-checkin.md)
- [自动刷新与实时数据](./auto-refresh.md)
