# よくある質問

プラグイン使用時によくある質問をまとめました。

## 🔐 認証方法について

### Cookieモードとアクセストークン方式の違いは何ですか？

プラグインは2つの認証方式をサポートしています。

| 認証方式 | 特徴 | 適用シーン | 推奨度 |
|---------|------|---------|---------|
| **アクセストークン** | ✅ 複数アカウント対応<br>✅ 永続的で期限切れなし<br>✅ より安全で安定 | ほとんどの標準的な中継サイト | ⭐⭐⭐⭐⭐ 強く推奨 |
| **Cookie** | ⚠️ シングルアカウント<br>⚠️ 期限切れの可能性あり<br>✅ 互換性が高い | トークンが制限されている特殊なサイト<br>改造サイト | ⭐⭐⭐ 特殊な場合に使用 |

**アクセストークン方式の使用を推奨します**。ただし、以下の場合は除きます。
- サイトがアクセストークンをサポートしていない場合
- 改造版の中継サイトを使用している場合
- トークン機能が無効になっている場合

### 認証方法を切り替えるには？

アカウントを追加する際、アカウントダイアログで対応する認証方法を選択します。
1. 「アカウントを追加」をクリック
2. サイトアドレスを入力
3. 「認証方法」ドロップダウンリストから `Access Token` または `Cookie` を選択
4. 「自動認識」をクリック

## 🔧 特殊なサイトの問題

### AnyRouterサイトでエラーが発生した場合の対処法は？

AnyRouterは改造版の中継サイトであり、標準のアクセストークン方式をサポートしていません。

**解決策**：
1. アカウントを追加する際、**Cookieモード**を選択します。
2. まずブラウザでAnyRouterサイトにログインします。
3. その後、プラグインの自動認識機能を使用してアカウントを追加します。

::: warning 注意
AnyRouterはAPIを改造しているため、一部の機能が正常に動作しない可能性があります。問題が発生した場合は、サイト管理者に連絡することをお勧めします。
:::

### 自動認識が失敗した場合の対処法は？

自動認識が失敗した場合は、以下の方法を試してください。

1. **認証方法の切り替え**：アクセストークンからCookieモードへの切り替えを試してください。
2. **手動追加**：自動認識が失敗した後、以下の情報を手動で入力してください。
   - ユーザー名
   - ユーザーID
   - アクセストークン
   - チャージ比率
3. **ログイン状態の確認**：ブラウザで対象サイトにログインしていることを確認してください。
4. **サイトの互換性の確認**：サイトがサポートされているプロジェクトに基づいているか確認してください（下記参照）。

### 互換性のないサイトはどれですか？

サイトが大幅な二次開発を行い、重要なAPI（例：`/api/user`）を変更している場合、プラグインが正常に動作しない可能性があります。

よくある非互換の状況：
- ユーザー情報APIが変更されている
- アクセストークン機能が無効になっている
- 認証方法がカスタマイズされている
- API応答形式が変更されている

## 🐛 機能とバグについて

### 機能の問題やバグに遭遇した場合の対処法は？

1. **Issueの検索**：[GitHub Issues](https://github.com/qixing-jk/all-api-hub/issues) にアクセスし、同様の問題がないか検索してください。
2. **最新バージョンの使用**：
   - ストア版の更新は遅いため、GitHub Release版の使用を推奨します。
   - または、mainブランチの開発バージョンを直接使用してください。

### 最新バージョンを入手するには？

プラグインは複数のプラットフォームで公開されており、更新速度に違いがあります。

| プラットフォーム | 更新速度 | バージョンの取得 |
|------|---------------|---------|
| **GitHub Releases** | ⚡ 最速 | [ダウンロードはこちら](https://github.com/qixing-jk/all-api-hub/releases) |
| **Chrome Web Store** | 🐌 遅め（3-5日審査） | [インストールはこちら](https://chromewebstore.google.com/detail/lapnciffpekdengooeolaienkeoilfeo) |
| **Edge Add-ons** | 🐌 遅め（3-5日審査） | [インストールはこちら](https://microsoftedge.microsoft.com/addons/detail/pcokpjaffghgipcgjhapgdpeddlhblaa) |
| **Firefox Add-ons** | ⚡ 速い（数時間審査） | [インストールはこちら](https://addons.mozilla.org/firefox/addon/{bc73541a-133d-4b50-b261-36ea20df0d24}) |

::: tip ヒント
修正済みのバグに遭遇した場合は、GitHub Releasesから最新バージョンをダウンロードして手動でインストールすることをお勧めします。
:::

## ⚙️ 機能の使用に関する問題

### WebDAVバックアップを使用するには？

WebDAVバックアップは、複数のデバイス間でデータを同期するのに役立ちます。

1. **WebDAVの設定**：
   - 「設定」→「WebDAVバックアップ」を開く
   - WebDAVサーバーアドレス（完全なURL）を入力
   - ユーザー名とパスワードを入力
   
2. **同期ポリシーの選択**：
   - `結合`（推奨）：ローカルデータとリモートデータをインテリジェントに結合
   - `アップロードのみ`：ローカルデータのみをサーバーにアップロード
   - `ダウンロードのみ`：サーバーからデータのみをダウンロード

3. **自動同期の有効化**：
   - 「自動同期を有効にする」にチェックを入れる
   - 同期間隔を設定（デフォルト3600秒/1時間）

::: tip 推奨サービス
- [堅果雲](https://www.jianguoyun.com/)（中国国内からのアクセスが速い）
- Nextcloud（セルフホスト）
- Synology NAS（Synology）
:::

### CherryStudio / New APIにエクスポートするには？

高速エクスポート機能を使用すると、サイト設定をワンクリックで他のプラットフォームにインポートできます。

**設定手順**：

1. **New APIの場合**：
   - 「設定」→「基本設定」を開く
   - New APIサーバーアドレスを設定
   - 管理者トークン（Admin Token）を入力
   - ユーザーIDを入力

2. **CherryStudioの場合**：
   - 追加設定は不要
   - CherryStudioが実行中であることを確認

**エクスポート手順**：

1. 「キー管理」ページに移動
2. エクスポートしたいサイトを見つける
3. 操作メニューをクリック
4. 「CherryStudioにエクスポート」または「New APIにエクスポート」を選択

::: info スマート検出
New APIへのエクスポート時、プラグインは同じチャネルが既に存在するかどうかを自動的に検出し、重複追加を回避します。
:::

### サイトのチェックイン機能を使用するには？

一部の中継サイトでは、毎日のチェックインで報酬を獲得できます。

1. **チェックイン検出の有効化**：
   - アカウントを編集
   - 「チェックイン検出を有効にする」にチェックを入れる
   
2. **カスタムチェックインURL**（オプション）：
   - サイトのチェックインページが標準パスではない場合
   - 「カスタムチェックインURL」を入力できます
   - 「カスタムチャージURL」（オプション）を入力

3. **チェックインの実行**：
   - チェックインが必要なアカウントにはチェックインアイコンが表示されます
   - アカウントカード上のチェックインボタンをクリック
   - チェックインページが自動的に開きます

### アカウントの並び順をカスタマイズするには？

プラグインは、複数のソート方法の優先順位設定をサポートしています。

1. **ソート設定に移動**：
   - 「設定」→「ソート優先順位設定」を開く
   
2. **優先順位の調整**：
   - ソート条件をドラッグして優先順位を調整
   - 条件の有効化/無効化をチェック/チェック解除
   
3. **利用可能なソート条件**：
   - 📌 現在のサイトを最上位に固定
   - 🏥 ヘルスステータスでソート（エラー > 警告 > 不明 > 正常）
   - ✅ チェックインが必要なアカウントを最上位に固定
   - 🔗 カスタムチェックインURLを持つアカウントを最上位に固定
   - 📊 ユーザー定義フィールドでソート（残高/消費/名前）

### 自動更新を設定するには？

自動更新により、アカウントデータを最新の状態に保つことができます。

1. **自動更新の有効化**：
   - 「設定」→「自動更新」を開く
   - 「定期的な自動更新を有効にする」にチェックを入れる
   
2. **更新間隔の設定**：
   - デフォルト：360秒（6分）
   - 最小：60秒（1分）
   - サイト数に応じて調整
   
3. **その他のオプション**：
   - ✅ プラグインを開いたときに自動更新
   - ✅ ヘルスステータスを表示

::: warning 注意
更新間隔が短すぎると、頻繁なリクエストが発生する可能性があります。60秒以上に設定することをお勧めします。
:::

## 📱 モバイルでの使用

### スマートフォンで使用するには？

プラグインはモバイルデバイスでの使用をサポートしています。

**Androidデバイス**：
1. [Kiwi Browser](https://play.google.com/store/apps/details?id=com.kiwibrowser.browser) をインストール（推奨）
   - Chrome拡張機能と完全に互換性あり
   - すべての機能をサポート
   
2. または Firefox for Android をインストール
   - Firefox Add-onsからインストール

**iOSデバイス**：
- 現在は未サポート（iOSの制限）

### モバイルでの使用に関する推奨事項

1. **サイドバーモードの使用**：スマートフォンの画面により適しています
2. **自動更新の有効化**：頻繁な手動更新を避ける
3. **WebDAV同期の設定**：PCとスマートフォンの間でデータを同期

## 🔒 データセキュリティ

### データはどこに保存されますか？

- **ローカルストレージ**：すべてのデータはブラウザのローカルストレージに保存されます
- **完全オフライン**：プラグインのコア機能はインターネット接続不要
- **データはアップロードされません**：いかなる第三者サーバーにもデータはアップロードされません

### データは失われますか？

定期的なデータバックアップを推奨します。

1. **JSONエクスポート**：
   - 「設定」→「データ管理」に移動
   - 「データのエクスポート」をクリック
   - JSONファイルを保存

2. **WebDAV同期**（推奨）：
   - 自動的にクラウドにバックアップ
   - 複数デバイスでの同期をサポート

## 🆘 その他の問題

### サイト重複検出とは何ですか？

サイトを追加する際、プラグインは同じサイトが既に存在するかどうかを自動的に検出します。
- サイトURLに基づいて判断
- 既に存在する場合は、プロンプトが表示され、迅速な変更が可能です
- 同じサイトの重複追加を回避

### ヘルスステータスとはどういう意味ですか？

ヘルスステータスはアカウントの利用可能性を示します。

| ステータス | アイコン | 意味 |
|------|------|------|
| 🟢 正常 | Healthy | アカウントは正常に動作しています |
| 🟡 警告 | Warning | 残高不足または注意が必要 |
| 🔴 エラー | Error | API呼び出しの失敗またはアカウントの異常 |
| ⚪ 不明 | Unknown | 未検出またはステータスを取得できません |

### プラグインはトラフィックを消費しますか？

- アカウントデータを更新する際にのみサイトAPIにアクセスします
- リクエスト量は非常に少ないです（各サイト約数KB）
- 自動更新はWiFi環境での使用を推奨します

### コードを貢献するには？

プルリクエストの提出を歓迎します。
1. プロジェクトリポジトリをフォーク
2. 機能ブランチを作成
3. コードをコミット
4. プルリクエストを送信

詳細は以下を参照：[CONTRIBUTING.md](https://github.com/qixing-jk/all-api-hub/blob/main/CONTRIBUTING.md)

---

## 📚 関連ドキュメント

- [使用チュートリアル](./get-started.md)
- [GitHubリポジトリ](https://github.com/qixing-jk/all-api-hub)
- [問題のフィードバック](https://github.com/qixing-jk/all-api-hub/issues)
- [更新履歴](https://github.com/qixing-jk/all-api-hub/blob/main/CHANGELOG.md)

::: tip 答えが見つかりませんか？
上記の内容で問題が解決しない場合は、[GitHub Issues](https://github.com/qixing-jk/all-api-hub/issues) で質問してください。
:::