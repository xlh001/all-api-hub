# データのエクスポートとインポート

> JSONまたはWebDAVを使用して、アカウントと設定を迅速にバックアップ/移行できます。ローカルでの手動インポート/エクスポートとクラウド同期の2つのモードをサポートしています。

## 適用シナリオ

- 新しいデバイスで既存のサイトアカウント、キー、ソート設定を同期する。
- テスト環境/チームメンバーへ一括移行する。
- 他の管理ツール（例：One API Hub 旧バージョン）との間で相互にインポート/エクスポートする。

## 手動でのインポートとエクスポート

1. プラグインを開き → **インポート/エクスポート** ページに移動します。
2. 「ローカルバックアップ」カード内で：
   - **「JSONをエクスポート」** をクリックすると、ブラウザがアカウント/設定を含むファイルを自動的に生成します。
   - **「JSONをインポート」** をクリックしてファイルを選択すると、完了後にページに成功/失敗のメッセージが表示されます。
3. JSON構造には以下が含まれます：
   - `accounts`: すべてのサイトアカウント。フィールドは `accountStorage` と同じです。
   - `pinnedAccountIds`: ピン留めされたアカウントID。
   - `last_updated`: 新旧を判断するためのUnixタイムスタンプ。
   - `preferences`: ユーザー設定（言語、ソート、自動更新など）。

> **ヒント**：インポートすると現在のアカウントと設定が上書きされます。事前に一度バックアップをエクスポートすることをお勧めします。

## WebDAV同期

- 詳細については、[WebDAV バックアップと自動同期](./webdav-sync.md) を参照してください。
- 「マージ/アップロードのみ/ダウンロードのみ」のポリシーをサポートし、自動的に定期同期します。

## 他のツールとの連携

- **One API Hub**：データ構造を継承しているため、旧バージョンでエクスポートされたJSONを直接インポートできます。
- **サードパーティースクリプト**：同じフィールド命名規則に従っていれば、JSONを構築してインポートすることも可能です。
- **CherryStudio / CC Switch**：[サイトのクイックエクスポート](./quick-export.md) を使用してください。ターゲットプラットフォームに直接プッシュでき、手動でJSONを編集する必要はありません。

## よくある質問

| 問題 | 対処方法 |
|------|----------|
| インポート失敗 | JSON構造がエディターによって変更された可能性があります。エクスポートされた元の形式を使用することをお勧めします。必要に応じてコンソールのエラーメッセージを確認してください。 |
| アカウントの紛失 | バックアップ内の `accounts.length` が0でないか確認してください。誤って上書きした場合は、WebDAVまたはシステムのゴミ箱で古いファイルを見つけることができます。 |
| 設定のみを復元したい | JSONを手動で編集し、`preferences` フィールドのみを残してインポートできます。 |
| ファイルに古いフィールドが含まれている | システムは自動的に移行スクリプト（例：WebDAV config migration）を実行します。それでも失敗する場合は、JSON構造を添付してフィードバックしてください。 |

## 関連ドキュメント

- [WebDAV バックアップと自動同期](./webdav-sync.md)
- [サイト設定のクイックエクスポート](./quick-export.md)
- [自動更新とリアルタイムデータ](./auto-refresh.md)