# 自動認識トラブルシューティングガイド

このページでは、プラグインの「アカウント追加/編集」で **自動認識** をクリックした際に発生する、認識に時間がかかりすぎる、無限待機、認識失敗（401/403/フォーマットエラーなど）、および送信できないなどの問題のトラブルシューティングについて説明します。

## 認識に時間がかかりすぎる（「認識中...」のまま）

自動認識は一時的なページを開いてサイト情報を読み取る必要があるため、以下の状況では明らかに遅くなります。

-   **サイトで Cloudflare / ファイアウォール認証が有効になっている場合**：一時的なウィンドウがポップアップ表示されたかどうかを確認してください。手動で認証を選択する必要がある場合は、タイムアウトする前に認証を完了してください。
-   **ネットワーク/サイトの応答が遅い場合**：しばらく待つか、ネットワーク/プロキシを切り替えてから再試行することをお勧めします。
-   **権限/ブラウザの異常**：オプションの権限を付与した直後から「ずっと待機中」の状態になった場合は、以下の「オプションの権限を付与した後の無限待機」を参照してください。

### オプションの権限を付与した後の無限待機

初めてオプションの権限を付与した後、一部のサイトの認識が自動認識のままになり、インターフェースがずっと読み込み中の状態になることがあります。

-   解決策：ブラウザの拡張機能管理ページを開き、まず本拡張機能を **無効にしてから再度有効にする** か、**ブラウザを再起動** してから認識/認証を再試行してください。
-   オプションの権限の用途と説明については、`/permissions`（権限管理）を参照してください。

## 認識失敗：まず本当にログインしていることを確認してください

自動認識は、同じブラウザで対象サイトにすでにログインしていることに依存します。

1.  まずブラウザで対象サイトの管理画面（コンソール）ページを開きます。
2.  ログインページにリダイレクトされていないことを確認します（ページを一度更新して検証します）。
3.  その後、プラグインに戻り自動認識を実行します。

## 認識失敗：認証方法の切り替えを試してください

サイト/カスタマイズバージョンによってインターフェースとログイン状態の処理が異なるため、認識失敗時にはまず認証方法の切り替えを試してください。

-   **アクセストークン認証失敗**：**Cookie認証** に切り替えてから再度自動認識を実行してください。
-   **AnyRouter**：**Cookie認証** を使用する必要があります。また、Cookie は現在ログインしているアカウントのものである必要があります。Cookie認証は、同じサイトで複数のアカウントを同時に使用することをサポートしていません。

## 送信できない / 保存できない：必須項目を一つずつ確認してください

必須項目が満たされていない場合、送信ボタンが無効になるか、保存に失敗します。一つずつ確認してください：

-   **サイト名**、**ユーザー名**、**ユーザーID** が入力されていること
-   **チャージ金額比率（為替レート）** が0より大きい数字であること
-   **アクセストークン認証** を選択した場合：**アクセストークン** が入力されていること
-   **Cookie認証** を選択した場合：**セッションCookie（Header値）** がインポートまたは入力されていること

自動認識が常に完了しない場合は、**手動追加** に切り替えて、まずアカウントを保存し、その後情報を段階的に補完することができます。

## 最後の手段：アカウントの手動追加
自動認識が常に完了しない場合は、**手動追加** に切り替えて、情報を補完し、その後アカウントを保存することができます。

詳細は [アカウント手動追加ガイド](./get-started.md#manual-addition) を参照してください。