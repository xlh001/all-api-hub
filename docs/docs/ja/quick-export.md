# サイト設定の高速エクスポート

> 登録済みの集約型プロキシステーションアカウントを、CherryStudio、CC Switch、New APIなどのダウンストリームシステムにワンクリックで同期し、Base URL、APIキー、モデルリストの重複入力を回避します。

## サポート対象

| 対象 | 方法 | 備考 |
|------|------|------|
| CherryStudio | ローカルプロトコルを介してクライアントを起動し、API情報を自動入力 | CherryStudioデスクトップ版を起動し、認証が必要です |
| CC Switch | JSON/クリップボード形式で出力、専用フィールドマッピングを内蔵 | CC Switch内でインポート機能を使用して内容を貼り付ける必要があります |
| New API | `/api/channel` を呼び出し、チャネルを自動作成/更新し、モデルリダイレクトを生成 | 管理者URL、トークン、ユーザーIDの入力が必要です |

## 事前設定

1.  **サイト同期**：まずプラグインでアカウント認識を完了し、キーリストにエクスポート可能なAPIが存在することを確認します。
2.  **ターゲット認証情報**：
    -   CherryStudio / CC Switch：追加設定は不要ですが、アプリケーションを実行状態に保つ必要があります。
    -   New API：「基本設定 → New API 統合設定」で管理者URL、トークン、ユーザーIDを入力します。
3.  **モデルリスト**：ホワイトリストエクスポートが必要な場合は、「New API モデル同期」で事前にモデルをフィルタリングできます。

## 操作手順

1.  プラグインを開き → **キー管理**、任意のサイトカードで **「エクスポート」** ボタンをクリックします。
2.  ターゲットプラットフォームを選択します：`CherryStudio` / `CC Switch` / `New API`。
3.  プロンプトに従って認証を完了します：
    -   CherryStudio：ブラウザがデスクトップクライアントを開くかどうかを尋ねるので、確認後に自動で完了します。
    -   CC Switch：JSONを生成してクリップボードにコピーし、CC Switchに切り替えて貼り付けるだけです。
    -   New API：バックグラウンドで管理者APIを呼び出し、同じBase URLが検出された場合は、重複作成ではなく更新を促します。
4.  ターゲットシステムでチャネル/プロバイダーが表示されていることを確認し、呼び出しをテストします。

## エクスポート内容

| フィールド | 説明 |
|------|------|
| サイト名 | サイト/アカウントの備考から自動取得、エクスポート前に変更可能 |
| Base URL | アカウントの `base_url` を使用し、プロトコルプレフィックスが含まれていることを確認 |
| APIキー | キーリストから取得、サイトが複数のキーをサポートしている場合は個別にリストアップ |
| モデルリスト | サイトの機能検出またはNew APIモデル同期の結果から取得 |
| チャージ比率 | CherryStudio/CC Switchでの換算表示に使用 |
| グループ/優先度 | New API向けに、デフォルトで `default` グループと優先度0に設定されており、エクスポートパネルで手動調整可能 |

## よくある質問

| 問題 | 対処方法 |
|------|----------|
| New APIが401/403を通知 | 管理者トークンが期限切れでないことを確認し、プラグインで設定を再保存してください。必要に応じて [Cloudflare 過盾アシスタント](./cloudflare-helper.md) を参照してください。 |
| CherryStudioが応答しない | デスクトップ版がインストールされており、ブラウザが `cherrystudio://` プロトコルを起動することを許可しているか確認してください。 |
| CC Switchのインポートが失敗する | 生成されたJSONを公式のインポートダイアログに貼り付けてください。フィールドの欠落が通知される場合は、CC Switchを最新バージョンに更新してください。 |
| モデルリストが空である | サイトがまだモデルデータを返していないため、まずプラグイン内でモデルリストを更新するか、New APIモデル同期を実行してください。 |

## 関連ドキュメント

-   [New API チャネル管理](./new-api-channel-management.md)
-   [New API モデルリスト同期](./new-api-model-sync.md)
-   [Cloudflare 過盾アシスタント](./cloudflare-helper.md)