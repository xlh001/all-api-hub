#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Format check
echo "ğŸ“ Checking code formatting..."
pnpm format:check || {
  echo "âŒ Formatting issues found. Running auto-fix..."
  pnpm format
  echo "âœ… Code formatted. Please review and stage the changes."
  exit 1
}

# Lint check
echo "ğŸ” Running linter..."
pnpm lint || {
  echo "âŒ Linting issues found. Attempting to auto-fix..."
  pnpm lint:fix
  echo "âš ï¸  Please review the fixes and stage the changes."
  exit 1
}

echo "âœ… Pre-commit checks passed!"
